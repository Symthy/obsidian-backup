
[REST vs. gRPC - What’s the Difference?](https://amplication.com/blog/rest-vs-grpc-whats-the-difference)

# REST vs gRPC

## REST

RESTとは
- representational state transferの略
- APIやWebベース、マイクロサービスベースのアプリケーションを設計する際に用いられる最も一般的なアーキテクチャスタイル。
- 標準的なHTTPプロトコルに基づいて構築されており、RESTfulな各ウェブサービスはリソースを表す。
- リソースは、HTTP標準メソッド（GET、POST、PUT、DELETE）を使用する共通のインターフェイスを介して取得または操作可能 
  
REST APIsは：  
  
- クライアント・サーバーに依存しない：ユーザーインターフェイス（クライアント）の関心事は、データストレージ（サーバー）の関心事から分離されています。  
- ステートレス：クライアントとサーバー間の通信には、リクエストの処理に必要なすべての情報が含まれています。  
- キャッシュ可能：RESTのリソースは、パフォーマンスを向上させるために、クライアントまたはサーバー側でキャッシュ可能です。  

すべてのコンポーネントが同じルールに従って相互作用する、統一されたインターフェイスを提供するように設計される。さらに、設計はレイヤーアーキテクチャに基づいているため、各コンポーネントは、相互作用している実際のレイヤーのみを表示することができます。

## gRPC

gRPCとは
- Google Remote Procedure Call の略。RPCプロトコルの上に作られたもの。
	- RPCプロトコルは、HTTP2.0を利用して構築されたオープンソース、クロスプラットフォーム、高速通信プロトコルであり、分散アプリケーションのサービス間通信に広く利用されている
- gRPCはRPCを拡張したもので、リモートサーバーにホストされている関数を、必ずしも同じサーバーにホストされていない別のリモートサーバーやマシンから呼び出すことが可能。
- HTTP2.0プロトコルにより、gRPCは双方向のストリーミングを行うことができ、内蔵のトランスポートレイヤーセキュリティを提供し、開発者は様々な言語でプログラムされたサービスを統合可能。  
- gRPCはHTTPをトランスポート層として使用するため、開発者は定義済みのオプションではなく、関数コールを選択することが可能。
- gRPCはサーバとクライアント間で長寿命の接続を作成し、RPC呼び出しごとに新しいHTTP 2.0ストリームをオープンするため、サーバとクライアント間の疎結合を提供する

## 比較

### Working Model

- RESTはHTTP1.1プロトコルで構築され、リクエスト-レスポンスモデルに基づいてAPIを定義可能。
- gRPCはHTTP2.0プロトコルで構築され、その双方向通信機能と従来のレスポンス-リクエストモデルを使用。
- つまり、REST APIでは、複数のクライアントからの複数のリクエストを順次処理するのに対し、gRPCでは、HTTP 2.0で多重化できるため、多数のリクエストを同時に処理可能

RESTのWorking Modelには、APIを定義するときのための組み込みコードや標準的な規定も必要。gRPCは、サーバーとクライアントが従う必要のある標準データ交換ガイドラインを含む、定義済みの.protoファイルに基づくモデルに従う。

### Communication Model

RESTとgRPCは、リクエストの送信とレスポンスの受信に異なるメッセージング形式を使用 
- REST API
	- 一般的に、サーバーとクライアント間でメッセージを受信・返却するためにJSONを実装
	- JSONはテキストベースで人間が読めるため、他のメッセージングフォーマットよりも効率的でプラットフォームに依存しない。  
- gRPC
	- RESTがJSONを使用するように、シリアライズと通信にプロトコルバッファを使用
	- プロトコルバッファ（Protobuf）は、データをシリアライズするための効率的で高度にパックされたメッセージングフォーマットであり、迅速な応答配信を実現
	- Protobufは、メッセージパケットのマーシャリング（パラメータやリモート関数をバイナリメッセージパケットに詰める）を行ってからネットワーク上に送信するため、システム間でメッセージを送信する際に高速化する

### RESTよりgRPCを使用する場合

REST
- アプリケーションが多数のサードパーティとの統合を必要とする場合に有益
- RESTはステートレスな呼び出しを行うため、技術的な障害が発生した場合でもクラウドアプリケーションに容易に組み込むことができ、クラウドベースのアプリケーションの開発にも適している。
- RESTはアプリケーションのあらゆる種類のブラウザをサポート
  
gRPC
- 限られたブラウザしかサポートしていない。(レイテンシは決して問題ではない）
- gRPCは、このレイテンシの低減とデータ伝送の高速化により、軽量なマイクロサービス・アプリケーションを開発する際に好ましい選択肢
- gRPCは非常に高度なメッセージシリアライゼーションを特徴とするため、開発者は主にリアルタイムのメッセージ配信を必要とするマイクロサービスでgRPCを使用する
- 特に、軽量なメッセージング、低消費電力ネットワーク、高い効率性が求められるシステムの接続に適している。  
  
RESTと比較して、gRPCはネイティブコード生成を行うため、開発者は多言語または言語にとらわれない環境でアプリケーションを開発可能という利点がある。

全体として、gRPCは多重化されたストリームを必要とするアプリケーションや、ブラウザのサポートが限定的なモバイルアプリケーションで使用される。