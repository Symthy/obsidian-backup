
# 方式(アーキテクチャ)設計

- 要件定義の次
- 要件定義の成果を受けて、どのような構成や仕組でシステムやアプリケーション（ソフトウェア）を構築していくかを決定していく

IPAの共通フレーム（開発全体の流れ）
- システム化構想、計画
- 要件定義
	- 事業要件、業務用兼を実現するために必要なシステムの機能、システム化の範囲を明確にし、ステークホルダ間で合意する。RFPに記載するような内容
--------------------
開発プロセス
- システム要件定義
	- 要件定義で合意された要件を、システム設計のための要件として定義する。SEによる要件定義作業と呼ばれるもの
- システム方式設計
	- システム要件を実現するためのハードウェア、ソフトウェアの構成等、システムの最上位レベルでの方式を確立
- ソフトウェア要件定義
	- データおよびデータベースの要件、外部インターフェースや画面設計の要件、ほかのシステムとのデータレベルでの要件等を定義する。
- ソフトウェア方式設計
	- ソフトウェア構造とコンポーネントの方式設計、外部インターフェースの設計、データベースの最上位レベルの設計等を行う。
- ソフトウェア詳細設計
- ソフトウェア作成
- ソフトウェア結合
- ソフトウェア適格性確認
- システム結合
- システム適格性確認
--------------------
- 運用テスト
- 運用、評価


## 要件定義

### 機能要件

- 業務に必要な手順を実行するための機能に関する条件
- 明確化するにあたり重要な点：システムの仕様をどのように共有し、行き違いなく合意すること
	- 例：利用者番号を入力すると利用者の注文履歴を表示する

#### 機能要件の合意形成ガイド：IPAが公開

技術領域を以下６つに分けている
- システム振る舞い
- 画面
- データモデル
- 外部インターフェース
- バッチ
- 帳票

「伝えたつもり」「聞いたつもり」「理解しているはず」「わかったつもり」を減らすために、合意形成のコツを278個掲載

### 非機能要件

- 業務を行うために必要な機能以外の条件
- 使用性、信頼性、効率性、移植性などの品質に関わる要件
	- 例：障害発生時の復旧時間は24時間以内とする
	- 例：注文履歴表示は1秒以内とする
- 明確するにあたっての重要な点：「認識違いなく合意すること」に加え、「抜けもれなく必要な項目を明確化すること」

#### 非機能要求グレード：IPAが公開

非機能要件＝システム基盤に関わる技術的要件。要求を出すのが難しく抜け漏れしやすい

非機能要件グレード：考慮すべき非機能要件が網羅されており、また開発対象システムに合わせて必要な項目を選択するようになっている

## システム方式

- 機能要件、非機能要件を元に設計
- 主に非機能要件で明確化した内容がベース
- 規定された性能や稼働率を満たすための方式を設計

# 構成のパターン

## DIコンテナ

- クラス間の依存関係をソースから外部の設定ファイルなどに分離し、実行時に依存関係を注入できるようにしたフレームワーク。
- DIコンテナを利用することで
	- クラス間の疎結合を実現できる
	- 依存しているクラスを別クラスに置き換えることも容易になり、Mockを使った単体テストも容易になる

Webアプリケーションの場合、複数のレイヤから構成されるため、レイヤ間の接続方法が異なっていたりすると管理が面倒になり、構築の仕方によってはレイヤ間で密結合になることもある。
DIコンテナという共通基盤を用いれば、レイヤ間の接続方法が統一されるため、レイヤごとに別々のフレームワークを用いても、それらを接続したり組み替えたりすることが容易になる

## AOP（アスペクト指向プログラミング）

- ソフトウェアのロギング処理など、複数のプログラムに散在すると管理が難しくなり、変更時に漏れが生じやすい。
- 横断的関心事をモジュール化し、プログラムから分離する。
	- 管理・変更しやすくなり、既存プログラムにhン質的に手を入れなくても特定の処理機能を追加・修正することができる
- インタセプタ（Interceptor）で実現

## データアクセス層（DAO）

- メソッドは、用途ごとに用意する
- 汎用的な書き込みメソッドは不適当

トランザクションスクリプト：処理とデータを分けても出るかする方式


#アーキテクチャ