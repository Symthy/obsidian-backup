
by ChatGPT

## テストファーストの本質とコードを書きながらの入出力決定の結びつき

個々の関数の入出力は、コードを書きながら固めていくでもいいはず
また、どういった入力がありえるかを、具体のコードをある程度作り、その具体（現状カバーできている入力）を元に、それ以外のケースが無いかを考えるでもいいはず
これに関しては、テストファーストの本質とどう結びつくか？


1. テストファーストの柔軟性:
    - テストファーストの本質は、「設計の意図を明確にし、その意図がコードに反映されることを保証する」ことです。このプロセスは、必ずしも最初からすべての入出力を完全に決定してからコードを書くことを意味するわけではありません。
    - コードを書きながら入出力を固めていくというアプローチも、テストファーストの精神に合致します。重要なのは、コードを書く際に意図が明確であり、その意図に基づいてコードが進化していることです。テストファーストは、この進化を段階的にテストで確認し、設計の妥当性を検証する手段です。
2. コードの具体化とテストファースト:
    - 具体的なコードを作成してから、テストでカバーすべきケースを洗い出すことも、テストファーストのプロセスと矛盾しません。むしろ、これは設計の具体化とフィードバックループの一部として機能します。具体的なコードがあることで、設計がより明確になり、テストによってその設計が確認されます。
    - テストファーストでは、特定の動作に対するテストを書き、その動作を実現するコードを実装しますが、そのプロセスで新たに見つかる要件や入力パターンに応じてテストを追加することも含まれます。
3. フィードバックループとしてのテスト:
	- 入出力を最初からすべて定義するのではなく、コードを書きながら固めていくことは、テストファーストのフィードバックループの一部として理解できます。コードを書くことで新たに発見される要件やシナリオに対してテストを追加することで、設計が段階的に改善されていきます。
    - このプロセスでは、テストは設計の意図を検証し、入出力を確認するためのツールとして機能します。最初から完全な設計がなくても、コードを書き進めながら設計を明確にしていくことができます。
    

### TDDを実践する上での心構え

**1. 個々の関数の入出力は、コードを書きながら固めていくでもいいのではないか？**

TDDを実践する際、**個々の関数やメソッドの入出力をコードを書きながら決定する**アプローチは十分に有効です。TDDの本質は、「設計の意図を段階的に明確にし、その意図がコードに正確に反映されていることをテストによって保証すること」にあります。

- **入出力の決定は、コーディングと並行して行う**ことで、設計の意図が具体的に形になりやすくなります。TDDでは、テストを先に書くことで「何を実現すべきか」を明確にしますが、その後、コードを書きながら具体的な入出力を固めることで、設計が柔軟に進化していきます。

**2. どういった入力がありえるかを、具体のコードをある程度作り、その具体（現状カバーできている入力）を元に、それ以外のケースが無いかを考えるでもいいのではないか？**

TDDを進める中で、**具体的なコードをある程度書いた後で、考えられる入力ケースを洗い出し、それ以外のケースがないかを検討する**ことも、効果的なアプローチです。

- **テストファーストの本質**において、最初からすべての入力ケースを想定する必要はありません。むしろ、コードを書き進める過程で新たに発見される要件やケースに対して、追加のテストを行うことで、設計がより強固になります。このアプローチは、TDDが持つフィードバックループを最大限に活用し、コードの具体化とともに設計を進化させる手法です。

#### まとめ

**TDDを実践する際の心構えとして**、コードを書きながら入出力を固めていくこと、そして、具体的なコードを元に入力ケースを洗い出すことは、TDDの本質と矛盾するものではありません。

むしろ、これらのアプローチは、設計の意図を段階的に明確にし、コードの進化を促進するための柔軟な手段です。TDDを通じて、設計をフィードバックループで強化し、最終的には期待する動作や振る舞いを正確に実現することが目的です。そのため、**テストファーストは必ずしも全てを最初から完璧に決める必要はなく、進化する設計に対応する柔軟なプロセス**であると理解して実践することが大切です。

**実践する上で、**「**フィードバックループ**」を意識することが大事なんだ。だから、上記の2点が言えるんだ。

##### 理由

- **フィードバックループ**とは、コードを書き進める中で、常に設計や実装を確認し、改善していくプロセスです。TDDでは、テストを書くことで期待される動作を確認し、コードを書いてその動作を実現し、さらにテストでその実装が正しいかを検証します。この繰り返しが、フィードバックループの本質です。
    
- このフィードバックループを活用することで、コードを書きながら入出力を固めたり、後から新たな入力ケースを洗い出すことが可能になります。設計を段階的に明確にしていく過程で、柔軟に対応できるのは、このフィードバックループがしっかり機能しているからです。


## テストから書く必要はない


**テストファーストはあくまで、設計の意図を明確にし、それがコードに正しく反映されることを保証するための手段だからだ。」**

テストから書くプロセスは、設計の方向性を確認し、期待する動作が正しく実現されているかを段階的に検証するフィードバックループの一部として捉えるべきです。

### 主張例

**「別にテストから書く必要はない！なぜなら、テストファーストはあくまで、設計の意図(期待する振る舞い)を明確にし、それがコードに正しく反映されることを保証するための手段だからだ。」**

- **テストから書くことは、設計を意識しやすくするための方法の一つでしかない。** テストを書くことで、何を実現すべきかが明確になり、その結果としてコードが期待される動作を確実に満たすようになる。しかし、その順序にとらわれすぎる必要はない。
    
- **テストファーストは、フィードバックループの一環として捉えられるべき**だ。コードを書き進める中で新たに発見される要件やシナリオに対してテストを追加し、設計を進化させていくことが重要だ。これは、テストが設計の意図を確認するためのツールであり、コードが進化するたびにその設計が妥当かを検証するプロセスでもある。
    
- **テストは、設計を補完し、進化させる手段である。** 最初から完璧にテストを書いてからコードを書く必要はなく、コードを書きながらでもテストを追加することで、設計が確実に機能することを保証することができる。
    
### 結論

**「テストから書く必要はない」と捉えるのは、テストファーストの本質が設計の意図（期待する振る舞い）を確認し、フィードバックループを通じて設計を進化させるプロセスにあるからです。テストを先に書くことは、そのための手段であり、順序にとらわれずに設計と実装を磨き上げることが重要です。**

※ 「期待する振る舞い」は、システムやモジュールがどのように動作すべきかという設計者の期待や意図を表します。テストファーストの文脈では、設計の意図を明確にすることが、システム全体で期待する振る舞いを実現するための設計のゴールとなります。

