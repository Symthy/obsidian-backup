増田さん


![](images/image_20240522120419.png)

アンチパターンに対して、なぜそうなっちゃうのか、どう立ち向かうのかの経験則

![](images/image_20240522120541.png)

## 不適切な設計：大きな泥団子

![](images/image_20240522120719.png)

![](images/image_20240522120935.png)

![](images/image_20240522121032.png)


![](images/image_20240522121146.png)
現実問題として、小さな修正を積み重ねれば積み重ねる程、こうなってしまう

![](images/image_20240522121319.png)
間違った達成感はまずい状態

## 銀の弾丸： 関心の分離

関心の分離＝根柢の設計原則
![](images/image_20240522121438.png)

銀の弾丸＝存在しない
根底にある考え方を意識しながら、個別の具体的な解決策の経験を積み重ねる
![](images/image_20240522121557.png)

設計とは：
- 経験則
- 習熟
- 共創

なぜ、関心の分離が必要なのか
![](images/image_20240522121910.png)
→TDDの根底と同じ

![](images/image_20240522122035.png)

## 関心の分離の枠組み：計算、アクション、アダプター

アプリケーションアーキテクチャの視点で考える時、この３つを意識する
→大きな泥団子になることを防げる

![](images/image_20240522122306.png)

ポート＆アダプター がベースにある考え方
であり、各アーキテクチャスタイルの根底にある共通の考え方
![](images/image_20240522122442.png)


![](images/image_20240522122601.png)
INアダプター と OUTアダプターは、フレームワーク等がしっかりているので最近は分けられている
→ ほっといてもある程度制約があるので、構造化できるが
　計算はどこにでも書けてしまう

![](images/image_20240522122755.png)

効果的な基本的アプローチ
![](images/image_20240522122814.png)
業務機能を実現するスクリプト からも分離できる
※あとで見返す

![](images/image_20240522123018.png)

要は計算：
- 境界値
- デシジョンテーブル
- 状態遷移
計算判定ロジック＝業務ルール

![](images/image_20240522123500.png)

アクションからはOUTアダプターを見えなくする（知識を持たないようにする）

## 設計の分離の基礎となる設計技法

オブジェクト指向 は 抽象データ型の考え方がベースになっている

![](images/image_20240522123715.png)

![](images/image_20240522123957.png)
コンストラクタで制約を設ける
静的な構造（宣言的な記述）で品質が担保できる

計算を扱う部分ではイミュータブルで扱う＝常識
![](images/image_20240522124333.png)

![](images/image_20240522124408.png)

![](images/image_20240522124516.png)

## 関心の分離：その他の実践技法

![](images/image_20240522124622.png)

![](images/image_20240522124636.png)
ディレクトリの 階層構造も設計になる（時間をかけるだけの価値がある）
→ 重要

![](images/image_20240522124817.png)

![](images/image_20240522124918.png)
実験のコストが下がったので、やってみて観察した方が早い


![](images/image_20240522125052.png)

![](images/image_20240522125149.png)
コードの雑音を気にしない開発チームに明るい未来はやってこない
→チームとして

![](images/image_20240522125255.png)

